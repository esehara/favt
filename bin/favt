#!/usr/bin/env ruby

require 'optparse'
require 'colorize'
require 'favt'
require 'twitter'

def option_parse
  options = {}
  OptionParser.new do |opts|

    opts.banner = "Usage: Twitter Favorite Reader"

    opts.on("-s N", "--show-count N", Integer, "Show Favorites (default: all)") do |n|
      options["show_count"] = n
    end
    
    opts.on("-u USER", "--user USER", String, "Read posts target favorited") do |n|
      options["users"] = n
    end

  end.parse!
  return options
end

begin
  ft = Favt::TwitterClient.new(option_parse)
  ft.render()
rescue Twitter::Error::TooManyRequests => e
  print "Error!!".light_red
  print " -- ".light_green
  print "Twitter API, Too Many Requests. Perhaps, Rate Limit Exceeded. \n".uncolorize
end
